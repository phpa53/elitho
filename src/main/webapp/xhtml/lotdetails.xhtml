<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="jakarta.tags.core"
	xmlns:cc="jakarta.faces.composite"
	xmlns:f="jakarta.faces.core"
	xmlns:faces="jakarta.faces"
	xmlns:fn="jakarta.tags.functions"
	xmlns:h="jakarta.faces.html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pass="jakarta.faces.passthrough"
	xmlns:ui="jakarta.faces.facelets">

<h:head>
   	<f:facet name="first">
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
	</f:facet>
	<title>#{lotDetailsBean.lotId}</title>
	<h:outputStylesheet library="css" name="elitho.css"/>
	<h:outputStylesheet library="css" name="primeflex.min.css"/>
	<h:outputScript library="js" name="elitho.js"/>
</h:head>

<h:body>

	<h:form>
        <p:outputPanel id="topBanner"
	        styleClass="top-banner"
	        style="background-image: url('#{resource['images/theme.jpg']}');">
	        <h:panelGroup layout="block" styleClass="banner-left">
		        <p:tooltip for="@next" value="Go to Home page" showEffect="fade" hideEffect="fade" position="bottom"/>
	        	<p:link id="fsmTopHomeLink"
	        		value="DEEPLITHO"
	            	styleClass="banner-left deeplitho-shadow"
	            	style="text-decoration:none"
	        		href="#{topBean.getHomeUrl()}"/>
	        	<h:outputText value="INTEGRATION"
	        		style="font-size:30px;font-weight:bold;color:chartreuse;margin-left:10px;margin-top:5px;"
	        		rendered="#{topBean.appEnv eq 'int'}"/>
	        </h:panelGroup>
	        <h:panelGroup layout="block" styleClass="banner-center">
	            <h:outputText value="#{topBean.appLabel}"/>
	        </h:panelGroup>
	        <h:panelGroup layout="block" styleClass="banner-right">
	        	<p:tooltip for="@next"
	        		value="Manage your acoount"
	        		showEffect="fade"
	        		hideEffect="fade"
	        		position="bottom"/>
	        	<div>
	        		<span>
		        	<p:link id="fsmTopUsernameLink"
		        		style="color:white;"
		        		value="Logged in as: #{topBean.userName}" 
		        		href="#{topBean.keycloakUrl}/../realms/deeplitho/account"/>
			        	<br/>
			        	<h:outputText value="Version #{topBean.appVersion}"
			        		style="color:white;font-size:12px;font-style:italic;"/>
		        	</span>
	        	</div>
	        </h:panelGroup>
	    </p:outputPanel>
    </h:form>

	<h:form id="lotDetailsForm">
        
        <p:panelGrid styleClass="lotdetails-grid" columns="5" layout="tabular">
        	<f:facet name="header">
        		<p:tooltip for="@next" value="Mode"/>
        		<p:selectOneButton id="lotdetailsmodeCB" value="#{lotDetailsBean.mode}" styleClass="ml-1">
		            <p:ajax event="change" listener="#{lotDetailsBean.modeChanged}"/>
		            <f:selectItem itemLabel="Lot" itemValue="lot"/>
		            <f:selectItem itemLabel="Layer" itemValue="layer"/>
		        </p:selectOneButton>
        		<p:tooltip for="@next" value="Scope"/>
        		<p:selectOneButton id="lotdetailsscopeCB" value="#{lotDetailsBean.scope}" styleClass="ml-1">
		            <p:ajax event="change" listener="#{lotDetailsBean.scopeChanged}"/>
		            <f:selectItem itemLabel="Detection" itemValue="detection"/>
		            <f:selectItem itemLabel="Systematic" itemValue="systematic"/>
		        </p:selectOneButton>
		        <p:commandButton icon="pi pi-angle-left"
                	title="Previous"
                	styleClass="ml-1"
                	actionListener="#{lotDetailsBean.previous()}"
                	update=""/>
		        <p:commandButton icon="pi pi-angle-right"
                	title="Next"
                	styleClass="ml-1"
                	actionListener="#{lotDetailsBean.next()}"
                	update=""/>
		        <p:commandButton icon="pi pi-angle-double-left"
                	title="Back"
                	styleClass="ml-1"
                	actionListener="#{lotDetailsBean.back()}"
                	update=""/>
                <p:outputLabel value="Start: #{lotDetailsBean.getSelectedStartDate()}"
                	style="color:blue;font-size:16;font-weight:bold" styleClass="ml-2"/>
        	</f:facet>
        	<p:row rendered="#{not empty LotDetailsBean.row0}">
        		<p:columns value="#{LotDetailsBean.row0}" var="col">
        		</p:columns>
        	</p:row>
        	<p:row rendered="#{not empty LotDetailsBean.row1}">
        		<p:columns value="#{LotDetailsBean.row1}" var="col">
        		</p:columns>
        	</p:row>
        	<p:row rendered="#{not empty LotDetailsBean.row2}">
        		<p:columns value="#{LotDetailsBean.row2}" var="col">
        		</p:columns>
        	</p:row>
        	<p:row rendered="#{not empty LotDetailsBean.row3}">
        		<p:columns value="#{LotDetailsBean.row3}" var="col">
        		</p:columns>
        	</p:row>
        	<p:row rendered="#{not empty LotDetailsBean.row4}">
        		<p:columns value="#{LotDetailsBean.row4}" var="col">
        		</p:columns>
        	</p:row>
        </p:panelGrid>
        
        
        <h2>Details for lot: #{lotDetailsBean.lot.lotId}</h2>
        <p><h:outputText value="Cluster #{lotDetailsBean.lot.cluster}"/></p>
        <p><h:outputText value="Techno: #{lotDetailsBean.lot.techno}"/></p>
        <p><h:outputText value="Maskset: #{lotDetailsBean.lot.maskset}"/></p>
        <p><h:outputText value="Layer: #{lotDetailsBean.lot.layer}"/></p>
        <p><h:outputText value="Start: #{lotDetailsBean.lot.start}"/></p>
        
        
        
        
        
	    <p:panel header="Detection wafers" style="margin:1rem;" rendered="false">
	        <p:dataGrid value="#{lotDetailsBean.waferImages}"
	        	var="img"
                columns="5"
                styleClass="image-grid"
                layout="grid"
                paginator="false">
	            <p:panel styleClass="image-cell" style="text-align:center;">
	                <p:graphicImage value="#{img}" styleClass="image"/>
	            </p:panel>
	        </p:dataGrid>
	    </p:panel>
	    
	</h:form>
    
</h:body>
</html>
